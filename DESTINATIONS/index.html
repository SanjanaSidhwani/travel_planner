<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Destinations - Travel Planner</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../AUTH/auth-shared.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-logo">
                <h1>Itinero</h1>
            </div>
            
            <ul class="navbar-menu">
                <li><a href="../HOME/index.html" class="nav-link">HOME</a></li>
                <li><a href="index.html" class="nav-link active">DESTINATIONS</a></li>
                <li><a href="../ITINERARY/index.html" class="nav-link">ITINERARY</a></li>
                <li><a href="../TRIP CALC/index.html" class="nav-link">TRIP CALCULATOR</a></li>
                <li><a href="../CHECKLIST/checklist.html" class="nav-link">CHECKLIST</a></li>
                <li><a href="../ABOUT/index.html" class="nav-link">ABOUT</a></li>
            </ul>
            
            <div class="navbar-utilities">
                <span class="language-toggle">EN</span>
                <button class="search-btn" aria-label="Search">
                    <i class="fas fa-search"></i>
                </button>
                <button class="user-btn" aria-label="User Account">
                    <i class="fas fa-user-circle"></i>
                </button>
                <button class="login-btn" onclick="openLoginModal()">LOGIN</button>
            </div>
        </div>
    </nav>

    <!-- Filters Section -->
    <section class="filters-section">
        <div class="container">
            <div class="filters-row">
                <div class="filter-group">
                    <select id="region-filter">
                        <option value="" disabled selected>Regions</option>
                        <option value="">All Regions</option>
                        <option value="north-india">North India</option>
                        <option value="south-india">South India</option>
                        <option value="west-india">West India</option>
                        <option value="east-india">East India</option>
                        <option value="northeast-india">Northeast India</option>
                        <option value="central-india">Central India</option>
                    </select>
                </div>
                <div class="filter-group">
                    <select id="type-filter">
                        <option value="" disabled selected>Types</option>
                        <option value="">All Types</option>
                        <option value="beach">Beach</option>
                        <option value="mountain">Mountain</option>
                        <option value="city">City</option>
                        <option value="historical">Historical</option>
                        <option value="adventure">Adventure</option>
                        <option value="cultural">Cultural</option>
                    </select>
                </div>
                <div class="filter-group">
                    <select id="budget-filter">
                        <option value="" disabled selected>Budgets</option>
                        <option value="">All Budgets</option>
                        <option value="budget">Budget (₹20k-50k)</option>
                        <option value="mid-range">Mid-range (₹50k-1L)</option>
                        <option value="luxury">Luxury (₹1L+)</option>
                    </select>
                </div>
                <button id="clear-filters" class="clear-btn">
                    <i class="fas fa-times"></i> Clear Filters
                </button>
            </div>
        </div>
    </section>

    <!-- Destinations Grid -->
    <section class="destinations-section">
        <div class="container">
            
            <div class="loading-spinner" id="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Loading destinations...</p>
            </div>

            <div class="destinations-grid" id="destinations-grid">
                <!-- Destinations will be populated by JavaScript -->
            </div>

            <div class="no-results" id="no-results" style="display: none;">
                <i class="fas fa-search"></i>
                <h3>No destinations found</h3>
                <p>Try adjusting your search criteria or filters</p>
            </div>

            <div class="load-more-section">
                <button id="load-more-btn" class="load-more-btn">
                    <i class="fas fa-plus"></i> Load More Destinations
                </button>
            </div>
        </div>
    </section>

    <!-- Destination Detail Modal -->
    <div class="modal-overlay" id="destination-modal">
        <div class="modal-content">
            <button class="modal-close" id="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-body" id="modal-body">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2>Welcome Back</h2>
                <button class="close-btn" onclick="closeLoginModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <form class="login-form">
                    <div class="input-group">
                        <label for="email">Email</label>
                        <div class="input-wrapper">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="email" placeholder="Enter your email" required>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="password">Password</label>
                        <div class="input-wrapper">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="password" placeholder="Enter your password" required>
                            <button type="button" class="password-toggle" onclick="togglePassword()">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-container">
                            <input type="checkbox" id="remember">
                            <span class="checkmark"></span>
                            Remember me
                        </label>
                        <a href="#" class="forgot-link">Forgot password?</a>
                    </div>
                    
                    <button type="submit" class="login-submit-btn">
                        <i class="fas fa-sign-in-alt"></i>
                        Sign In
                    </button>
                </form>
                
                <div class="modal-divider">
                    <span>or</span>
                </div>
                
                <div class="social-login">
                    <button class="social-btn google-btn">
                        <i class="fab fa-google"></i>
                        Continue with Google
                    </button>
                    <button class="social-btn apple-btn">
                        <i class="fab fa-apple"></i>
                        Continue with Apple
                    </button>
                </div>
            </div>
            
            <div class="modal-footer">
                <p>Not a member? <a href="../AUTH/signup.html" class="signup-link">Sign up now</a></p>
            </div>
        </div>
    </div>

    <script>
        // Login Modal Functions
        function openLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function togglePassword() {
            const passwordField = document.getElementById('password');
            const toggleIcon = document.querySelector('.password-toggle i');
            
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                toggleIcon.classList.remove('fa-eye');
                toggleIcon.classList.add('fa-eye-slash');
            } else {
                passwordField.type = 'password';
                toggleIcon.classList.remove('fa-eye-slash');
                toggleIcon.classList.add('fa-eye');
            }
        }

        function showSignupMessage() {
            // FIXED: Ensure signup navigation works reliably
            // Primary method: direct navigation to signup page
            window.location.href = '../AUTH/signup.html';
        }
        
        // FIXED: Additional signup navigation helper for backup
        // This ensures signup button works even if called from different contexts
        function navigateToSignup() {
            window.location.href = '../AUTH/signup.html';
        }

        // Close modal when clicking outside - FIXED: More specific targeting to prevent interference with links
        // Previously this was using a broad window.onclick that could interfere with signup links
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('loginModal');
            if (modal) {
                modal.addEventListener('click', function(event) {
                    // Only close if clicking on the modal backdrop itself, not its contents
                    if (event.target === modal) {
                        closeLoginModal();
                    }
                });
            }
        });
    </script>

    <script src="script.js"></script>
    <script src="../AUTH/auth-shared.js"></script>
    <script>
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // FIXED: Ensure signup link functionality is protected from interference
            // Add explicit event handler to guarantee signup link works
            const signupLink = document.querySelector('.signup-link');
            if (signupLink) {
                signupLink.addEventListener('click', function(e) {
                    // Ensure default link behavior works (navigate to signup page)
                    // This prevents any other scripts from interfering
                    e.stopPropagation(); // Prevent modal close handlers from interfering
                    // Let the default href behavior proceed
                });
            }
            
            // Give a small delay to ensure all scripts have loaded
            setTimeout(function() {
                if (typeof initializePage === 'function') {
                    initializePage();
                }
                
                // Initialize authentication
                if (typeof initializeAuth === 'function') {
                    initializeAuth();
                }
            }, 100);
        });
    </script>
</body>
</html>
